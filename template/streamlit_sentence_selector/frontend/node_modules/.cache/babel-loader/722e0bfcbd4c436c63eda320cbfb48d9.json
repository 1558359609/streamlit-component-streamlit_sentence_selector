{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Projects\\\\PycharmProject\\\\deeplearning\\\\streamlit-sentence-selector\\\\template\\\\streamlit-sentence-selector\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\Projects\\\\PycharmProject\\\\deeplearning\\\\streamlit-sentence-selector\\\\template\\\\streamlit-sentence-selector\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Projects\\\\PycharmProject\\\\deeplearning\\\\streamlit-sentence-selector\\\\template\\\\streamlit-sentence-selector\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Streamlit,withStreamlitConnection}from\"streamlit-component-lib\";import React,{useState,useEffect}from\"react\";// 子组件定义\nfunction ChildComponent(props){var _ref=props||{},handleClickThisEle=_ref.handleClickThisEle,selectArr=_ref.selectArr,item=_ref.item,isSelected=_ref.isSelected;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),thisSpanIsHovering=_useState2[0],setThisSpanIsHovering=_useState2[1];//当前span是不是正在被hover\nvar hoverStyle={background:'lightblue'};//hover时样式\nvar selectedStyle={background:'lightskyblue'};//selected时样式\nvar computedNeedShowStyle={};if(isSelected&&thisSpanIsHovering){computedNeedShowStyle=_objectSpread(_objectSpread(_objectSpread({},hoverStyle),selectedStyle),{},{cursor:'pointer'});//既被hover又被selected时背景色以selected时的背景色为主\n}else if(isSelected&&!thisSpanIsHovering){computedNeedShowStyle=_objectSpread(_objectSpread({},selectedStyle),{},{cursor:'pointer'});}else if(!isSelected&&thisSpanIsHovering){computedNeedShowStyle=_objectSpread(_objectSpread({},hoverStyle),{},{cursor:'pointer'});}else if(!isSelected&&!thisSpanIsHovering){computedNeedShowStyle={cursor:'pointer'};}// hover事件 - 驱动hover样式变化\nfunction toggleHover(type){if(type==='enter'){setThisSpanIsHovering(true);}else if(type==='leave'){setThisSpanIsHovering(false);}}return/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return handleClickThisEle(item);},onMouseEnter:function onMouseEnter(){return toggleHover('enter');},onMouseLeave:function onMouseLeave(){return toggleHover('leave');},className:selectArr.includes(item)?'selected':'',style:_objectSpread(_objectSpread({},computedNeedShowStyle),{},{border:'1px #cdcdcd solid',marginRight:'3px',borderRadius:'4px'})},item);}function SentencesClickLabel(_ref2){var args=_ref2.args;// const {parentPropsValue, onclickItem} = args || {};\nStreamlit.setComponentReady();var sentences=args.sentences;var parentPropsValue=sentences;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectArr=_useState4[0],setSelectArr=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),hoverStyle=_useState6[0],setHoverStyle=_useState6[1];//hover样式\n// 点击事件, 动态添加class颜色。并将选中的语句提交给父组件\nfunction handleClickThisEle(item){var newSelectArr=[];if(selectArr.includes(item)){//原来已经包含需要剔除\nnewSelectArr=selectArr.filter(function(oldItem){return oldItem!==item;});}else{//原来不包含需要加入\nnewSelectArr=[].concat(_toConsumableArray(selectArr),[item]);}setSelectArr(newSelectArr);console.log('你选择的语句有 => ',_toConsumableArray(newSelectArr));// 抛出去给后端\n// onclickItem([...newSelectArr]);\nStreamlit.setComponentValue(_toConsumableArray(newSelectArr));}// hover事件-hover样式\nfunction toggleHover(type){var nowStyle=type==='enter'?{background:'lightblue'// padding: '3px',\n}:{};setHoverStyle(nowStyle);}useEffect(function(){Streamlit.setFrameHeight();});return/*#__PURE__*/React.createElement(\"div\",{className:\"tag\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sentence\",style:{lineHeight:'30px',height:'30px',// marginLeft: '5px',\n// border: '1px #cdcdcd solid',\npadding:'2px',borderRadius:'4px',cursor:'pointer',transitionProperty:'all'}},parentPropsValue===null||parentPropsValue===void 0?void 0:parentPropsValue.map(function(item,index){return/*#__PURE__*/React.createElement(ChildComponent,{key:index,selectArr:selectArr,item:item,isSelected:selectArr.includes(item),handleClickThisEle:handleClickThisEle,style:{border:'1px #cdcdcd solid'}});})))// <div>\n//     sdfsdfsdfsd\n// </div>\n;}export default withStreamlitConnection(SentencesClickLabel);","map":{"version":3,"names":["Streamlit","withStreamlitConnection","React","useState","useEffect","ChildComponent","props","handleClickThisEle","selectArr","item","isSelected","thisSpanIsHovering","setThisSpanIsHovering","hoverStyle","background","selectedStyle","computedNeedShowStyle","cursor","toggleHover","type","includes","border","marginRight","borderRadius","SentencesClickLabel","args","setComponentReady","sentences","parentPropsValue","setSelectArr","setHoverStyle","newSelectArr","filter","oldItem","console","log","setComponentValue","nowStyle","setFrameHeight","lineHeight","height","padding","transitionProperty","map","index"],"sources":["D:/Projects/PycharmProject/deeplearning/streamlit-sentence-selector/template/streamlit-sentence-selector/frontend/src/MyComponent_new2.tsx"],"sourcesContent":["import {\n    Streamlit,\n    ComponentProps,\n    withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, {ReactElement, ReactNode, useState, useEffect} from \"react\"\n\n\n// 子组件定义\nfunction ChildComponent(props: any) {\n    const {handleClickThisEle, selectArr, item, isSelected} = props || {};\n    const [thisSpanIsHovering, setThisSpanIsHovering] = useState(false);//当前span是不是正在被hover\n    const hoverStyle = {background: 'lightblue'}//hover时样式\n    const selectedStyle = {background: 'lightskyblue'}//selected时样式\n\n    let computedNeedShowStyle = {}\n    if (isSelected && thisSpanIsHovering) {\n        computedNeedShowStyle = {...hoverStyle, ...selectedStyle, cursor: 'pointer'}//既被hover又被selected时背景色以selected时的背景色为主\n    } else if (isSelected && !thisSpanIsHovering) {\n        computedNeedShowStyle = {...selectedStyle, cursor: 'pointer'}\n    } else if (!isSelected && thisSpanIsHovering) {\n        computedNeedShowStyle = {...hoverStyle, cursor: 'pointer'}\n    } else if (!isSelected && !thisSpanIsHovering) {\n        computedNeedShowStyle = {cursor: 'pointer'}\n    }\n\n    // hover事件 - 驱动hover样式变化\n    function toggleHover(type: any) {\n        if (type === 'enter') {\n            setThisSpanIsHovering(true)\n        } else if (type === 'leave') {\n            setThisSpanIsHovering(false)\n        }\n    }\n\n    return (\n        <span\n            onClick={() => handleClickThisEle(item)}\n            onMouseEnter={() => toggleHover('enter')}\n            onMouseLeave={() => toggleHover('leave')}\n            className={selectArr.includes(item) ? 'selected' : ''}\n            style={{...computedNeedShowStyle, border: '1px #cdcdcd solid', marginRight: '3px', borderRadius: '4px'}}\n        >\n          {item}\n        </span>\n    )\n}\n\n\nfunction SentencesClickLabel({args}: ComponentProps): ReactElement {\n    // const {parentPropsValue, onclickItem} = args || {};\n    Streamlit.setComponentReady()\n    const {sentences} = args\n    var parentPropsValue = sentences\n\n    const [selectArr, setSelectArr] = useState<any>([]);\n    const [hoverStyle, setHoverStyle] = useState({}); //hover样式\n\n    // 点击事件, 动态添加class颜色。并将选中的语句提交给父组件\n    function handleClickThisEle(item: any) {\n        let newSelectArr = [];\n        if (selectArr.includes(item)) {\n            //原来已经包含需要剔除\n            newSelectArr = selectArr.filter((oldItem: any) => oldItem !== item);\n        } else {\n            //原来不包含需要加入\n            newSelectArr = [...selectArr, item];\n        }\n        setSelectArr(newSelectArr);\n        console.log('你选择的语句有 => ', [...newSelectArr]);\n\n        // 抛出去给后端\n        // onclickItem([...newSelectArr]);\n        Streamlit.setComponentValue([...newSelectArr])\n    }\n\n    // hover事件-hover样式\n    function toggleHover(type: any) {\n        const nowStyle =\n            type === 'enter'\n                ? {\n                    background: 'lightblue',\n                    // padding: '3px',\n                }\n                : {};\n        setHoverStyle(nowStyle);\n    }\n\n    useEffect(() => {\n        Streamlit.setFrameHeight()\n    })\n    return (\n        <div className=\"tag\">\n      <span\n          className=\"sentence\"\n          style={{\n              lineHeight: '30px',\n              height: '30px',\n              // marginLeft: '5px',\n              // border: '1px #cdcdcd solid',\n              padding: '2px',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              transitionProperty: 'all',\n          }}\n      >\n\n          {parentPropsValue?.map((item: any, index: number) => {\n              return (\n                  <ChildComponent key={index}\n                                  selectArr={selectArr}\n                                  item={item} isSelected={selectArr.includes(item)}\n                                  handleClickThisEle={handleClickThisEle}\n                                  style={{\n                                      border: '1px #cdcdcd solid'\n                                  }}\n                  />\n              );\n          })}\n      </span>\n        </div>\n        // <div>\n        //     sdfsdfsdfsd\n        // </div>\n    );\n}\n\n\nexport default withStreamlitConnection(SentencesClickLabel)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}