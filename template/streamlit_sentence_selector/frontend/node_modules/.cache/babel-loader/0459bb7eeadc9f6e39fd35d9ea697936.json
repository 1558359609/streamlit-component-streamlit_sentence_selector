{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\PycharmProject\\\\deeplearning\\\\streamlit_learning\\\\streamlit-component-slider\\\\frontend\\\\src\\\\MyComponent_new2.tsx\";\nimport { Streamlit, withStreamlitConnection } from \"streamlit-component-lib\";\nimport React, { useState, useEffect } from \"react\"; // 子组件定义\n\nfunction ChildComponent(props) {\n  const {\n    handleClickThisEle,\n    selectArr,\n    item,\n    isSelected\n  } = props || {};\n  const [thisSpanIsHovering, setThisSpanIsHovering] = useState(false); //当前span是不是正在被hover\n\n  const hoverStyle = {\n    background: 'lightblue',\n    border: '1px #cdcdcd solid'\n  }; //hover时样式\n\n  const selectedStyle = {\n    background: 'lightgreen'\n  }; //selected时样式\n\n  let computedNeedShowStyle = {};\n\n  if (isSelected && thisSpanIsHovering) {\n    computedNeedShowStyle = { ...hoverStyle,\n      ...selectedStyle,\n      cursor: 'pointer'\n    }; //既被hover又被selected时背景色以selected时的背景色为主\n  } else if (isSelected && !thisSpanIsHovering) {\n    computedNeedShowStyle = { ...selectedStyle,\n      cursor: 'pointer'\n    };\n  } else if (!isSelected && thisSpanIsHovering) {\n    computedNeedShowStyle = { ...hoverStyle,\n      cursor: 'pointer'\n    };\n  } else if (!isSelected && !thisSpanIsHovering) {\n    computedNeedShowStyle = {\n      cursor: 'pointer'\n    };\n  } // hover事件 - 驱动hover样式变化\n\n\n  function toggleHover(type) {\n    if (type === 'enter') {\n      setThisSpanIsHovering(true);\n    } else if (type === 'leave') {\n      setThisSpanIsHovering(false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleClickThisEle(item),\n    onMouseEnter: () => toggleHover('enter'),\n    onMouseLeave: () => toggleHover('leave'),\n    className: selectArr.includes(item) ? 'selected' : '',\n    style: { ...computedNeedShowStyle\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, item);\n}\n\nfunction SentencesClickLabel(_ref) {\n  let {\n    args\n  } = _ref;\n  // const {parentPropsValue, onclickItem} = args || {};\n  const {\n    sentences\n  } = args;\n  var parentPropsValue = sentences;\n  const [selectArr, setSelectArr] = useState([]);\n  const [hoverStyle, setHoverStyle] = useState({}); //hover样式\n  // 点击事件, 动态添加class颜色。并将选中的语句提交给父组件\n\n  function handleClickThisEle(item) {\n    let newSelectArr = [];\n\n    if (selectArr.includes(item)) {\n      //原来已经包含需要剔除\n      newSelectArr = selectArr.filter(oldItem => oldItem !== item);\n    } else {\n      //原来不包含需要加入\n      newSelectArr = [...selectArr, item];\n    }\n\n    setSelectArr(newSelectArr);\n    console.log('你选择的语句有 => ', [...newSelectArr]); // 抛出去给后端\n    // onclickItem([...newSelectArr]);\n\n    Streamlit.setComponentValue([...newSelectArr]);\n  } // hover事件-hover样式\n\n\n  function toggleHover(type) {\n    const nowStyle = type === 'enter' ? {\n      background: 'lightblue' // padding: '3px',\n\n    } : {};\n    setHoverStyle(nowStyle);\n  }\n\n  useEffect(() => {\n    Streamlit.setFrameHeight();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sentence\",\n    style: {\n      lineHeight: '30px',\n      height: '30px',\n      // marginLeft: '5px',\n      // border: '1px #cdcdcd solid',\n      padding: '2px',\n      borderRadius: '4px',\n      cursor: 'pointer',\n      transitionProperty: 'all'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, parentPropsValue === null || parentPropsValue === void 0 ? void 0 : parentPropsValue.map((item, index) => {\n    return /*#__PURE__*/React.createElement(ChildComponent, {\n      key: index,\n      selectArr: selectArr,\n      item: item,\n      isSelected: selectArr.includes(item),\n      handleClickThisEle: handleClickThisEle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    });\n  }))) // <div>\n  //     sdfsdfsdfsd\n  // </div>\n  ;\n}\n\nexport default withStreamlitConnection(SentencesClickLabel);","map":{"version":3,"names":["Streamlit","withStreamlitConnection","React","useState","useEffect","ChildComponent","props","handleClickThisEle","selectArr","item","isSelected","thisSpanIsHovering","setThisSpanIsHovering","hoverStyle","background","border","selectedStyle","computedNeedShowStyle","cursor","toggleHover","type","includes","SentencesClickLabel","args","sentences","parentPropsValue","setSelectArr","setHoverStyle","newSelectArr","filter","oldItem","console","log","setComponentValue","nowStyle","setFrameHeight","lineHeight","height","padding","borderRadius","transitionProperty","map","index"],"sources":["D:/Projects/PycharmProject/deeplearning/streamlit_learning/streamlit-component-slider/frontend/src/MyComponent_new2.tsx"],"sourcesContent":["import {\n    Streamlit,\n      ComponentProps,\n    withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, {ReactElement, ReactNode, useState,useEffect} from \"react\"\n\n\n// 子组件定义\nfunction ChildComponent(props: any) {\n  const { handleClickThisEle,selectArr,item,isSelected } = props || {};\n  const [thisSpanIsHovering, setThisSpanIsHovering] = useState(false);//当前span是不是正在被hover\n  const hoverStyle = { background: 'lightblue',border:'1px #cdcdcd solid'}//hover时样式\n  const selectedStyle = {background: 'lightgreen'}//selected时样式\n\n  let computedNeedShowStyle= {}\n  if(isSelected && thisSpanIsHovering){\n    computedNeedShowStyle = {...hoverStyle,...selectedStyle,cursor: 'pointer'}//既被hover又被selected时背景色以selected时的背景色为主\n  } else if(isSelected && !thisSpanIsHovering){\n    computedNeedShowStyle = {...selectedStyle,cursor: 'pointer'}\n  } else if(!isSelected && thisSpanIsHovering){\n    computedNeedShowStyle = {...hoverStyle,cursor: 'pointer'}\n  }else if(!isSelected && !thisSpanIsHovering){\n    computedNeedShowStyle = {cursor: 'pointer'}\n  }\n\n  // hover事件 - 驱动hover样式变化\n  function toggleHover(type: any) {\n    if(type === 'enter'){\n      setThisSpanIsHovering(true)\n    }else if(type === 'leave'){\n      setThisSpanIsHovering(false)\n    }\n  }\n\n  return (\n        <span\n          onClick={() => handleClickThisEle(item)}\n          onMouseEnter={() => toggleHover('enter')}\n          onMouseLeave={() => toggleHover('leave')}\n          className={selectArr.includes(item) ? 'selected' : ''}\n          style={{...computedNeedShowStyle}}\n        >\n          {item}\n        </span>\n    )\n}\n\n\nfunction SentencesClickLabel({args}: ComponentProps):ReactElement {\n    // const {parentPropsValue, onclickItem} = args || {};\n\n    const{sentences}=args\n    var parentPropsValue=sentences\n\n    const [selectArr, setSelectArr] = useState<any>([]);\n    const [hoverStyle, setHoverStyle] = useState({}); //hover样式\n\n    // 点击事件, 动态添加class颜色。并将选中的语句提交给父组件\n    function handleClickThisEle(item: any) {\n        let newSelectArr = [];\n        if (selectArr.includes(item)) {\n            //原来已经包含需要剔除\n            newSelectArr = selectArr.filter((oldItem: any) => oldItem !== item);\n        } else {\n            //原来不包含需要加入\n            newSelectArr = [...selectArr, item];\n        }\n        setSelectArr(newSelectArr);\n        console.log('你选择的语句有 => ', [...newSelectArr]);\n\n        // 抛出去给后端\n        // onclickItem([...newSelectArr]);\n     Streamlit.setComponentValue([...newSelectArr])\n    }\n\n    // hover事件-hover样式\n    function toggleHover(type: any) {\n        const nowStyle =\n            type === 'enter'\n                ? {\n                    background: 'lightblue',\n                    // padding: '3px',\n                }\n                : {};\n        setHoverStyle(nowStyle);\n    }\n      useEffect(() => {\n    Streamlit.setFrameHeight()\n  })\n    return (\n        <div className=\"tag\">\n      <span\n          className=\"sentence\"\n          style={{\n              lineHeight: '30px',\n              height: '30px',\n              // marginLeft: '5px',\n              // border: '1px #cdcdcd solid',\n              padding: '2px',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              transitionProperty: 'all',\n          }}\n      >\n        {/*{parentPropsValue?.map((item: any, index: number) => {*/}\n        {/*    return (*/}\n        {/*        <span*/}\n        {/*            key={index}*/}\n        {/*            onClick={() => handleClickThisEle(item)}*/}\n        {/*            onMouseEnter={() => toggleHover('enter')}*/}\n        {/*            onMouseLeave={() => toggleHover('leave')}*/}\n        {/*            className={selectArr.includes(item) ? 'selected' : ''}*/}\n        {/*             style={*/}\n        {/*                 selectArr.includes(item)*/}\n        {/*                     ? {*/}\n        {/*                         ...hoverStyle,*/}\n        {/*                         background: 'lightgreen',*/}\n        {/*                         cursor: 'pointer',*/}\n        {/*                         border: '1px #cdcdcd solid',*/}\n        {/*                         borderRadius: '4px',*/}\n        {/*                         marginRight: '2px'*/}\n        {/*                     }*/}\n        {/*                     : {*/}\n        {/*                         ...hoverStyle,*/}\n        {/*                         cursor: 'pointer',*/}\n        {/*                         border: '1px #cdcdcd solid',*/}\n        {/*                         borderRadius: '4px',*/}\n        {/*                         marginRight: '2px'*/}\n        {/*                     }*/}\n        {/*             }*/}\n        {/*        >*/}\n        {/*               {item}*/}\n        {/*    </span>*/}\n        {/*    );*/}\n        {/*})}*/}\n\n          {parentPropsValue?.map((item: any, index: number) => {\n          return (\n            <ChildComponent key={index}  selectArr={selectArr} item={item} isSelected={selectArr.includes(item)} handleClickThisEle={handleClickThisEle}/>\n          );\n        })}\n      </span>\n        </div>\n        // <div>\n        //     sdfsdfsdfsd\n        // </div>\n    );\n}\n\n\nexport default withStreamlitConnection(SentencesClickLabel)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}