{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\PycharmProject\\\\deeplearning\\\\streamlit_learning\\\\streamlit-component-slider\\\\frontend\\\\src\\\\MyComponent_new.tsx\";\nimport { Streamlit, StreamlitComponentBase, withStreamlitConnection } from \"streamlit-component-lib\";\nimport React from \"react\";\n\n//类\nclass SentencesClickLabel extends StreamlitComponentBase {\n  constructor() {\n    super(...arguments);\n    this.useState = {\n      selectArr: [],\n      setSelectArr: [],\n      hoverStyle: []\n    };\n\n    this.render = () => {\n      // const {parentPropsValue, onclickItem} = props || {};\n      var parentPropsValue = this.props.args[\"sentences\"]; // const [selectArr, setSelectArr] = useState<any>([]);\n      // const [hoverStyle, setHoverStyle] = useState({}); //hover样式\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sentence\",\n        style: {\n          lineHeight: '30px',\n          height: '30px',\n          marginLeft: '5px',\n          border: '1px #cdcdcd solid',\n          padding: '2px',\n          borderRadius: '4px',\n          cursor: 'pointer',\n          transitionProperty: 'all'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 7\n        }\n      }, parentPropsValue === null || parentPropsValue === void 0 ? void 0 : parentPropsValue.map((item, index) => {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: index,\n          onClick: () => this.handleClickThisEle(item),\n          onMouseEnter: () => this.state.toggleHover('enter'),\n          onMouseLeave: () => this.state.toggleHover('leave'),\n          className: selectArr.includes(item) ? 'selected' : '',\n          style: selectArr.includes(item) ? { ...this.state.hoverStyle,\n            background: 'lightgreen',\n            cursor: 'pointer'\n          } : { ...this.state.hoverStyle,\n            cursor: 'pointer'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 17\n          }\n        }, item);\n      })));\n    };\n\n    this.handleClickThisEle = item => {\n      let newSelectArr = [];\n\n      if (this.state.selectArr.includes(item)) {\n        //原来已经包含需要剔除\n        newSelectArr = this.state.selectArr.filter(oldItem => oldItem !== item);\n      } else {\n        //原来不包含需要加入\n        newSelectArr = [...this.state.selectArr, item];\n      }\n\n      this.state.setSelectArr(newSelectArr);\n      console.log('你选择的语句有 => ', [...newSelectArr]); // 抛出去给后端\n      // this.state.onclickItem([...newSelectArr]);\n\n      var a = newSelectArr.join();\n      this.setState(() => Streamlit.setComponentValue(a));\n    };\n  }\n\n  // hover事件-hover样式\n  toggleHover(type) {\n    const nowStyle = type === 'enter' ? {\n      background: 'lightblue',\n      padding: '3px'\n    } : {};\n    this.state.setHoverStyle(nowStyle);\n  }\n\n}\n\nexport default withStreamlitConnection(SentencesClickLabel);","map":{"version":3,"names":["Streamlit","StreamlitComponentBase","withStreamlitConnection","React","SentencesClickLabel","useState","selectArr","setSelectArr","hoverStyle","render","parentPropsValue","props","args","lineHeight","height","marginLeft","border","padding","borderRadius","cursor","transitionProperty","map","item","index","handleClickThisEle","state","toggleHover","includes","background","newSelectArr","filter","oldItem","console","log","a","join","setState","setComponentValue","type","nowStyle","setHoverStyle"],"sources":["D:/Projects/PycharmProject/deeplearning/streamlit_learning/streamlit-component-slider/frontend/src/MyComponent_new.tsx"],"sourcesContent":["import {\n    Streamlit,\n    StreamlitComponentBase,\n    withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, {ReactNode, useState} from \"react\"\nimport {stringify} from \"querystring\";\n\n//类\nclass SentencesClickLabel extends StreamlitComponentBase<any> {\n    // 点击事件, 动态添加class颜色。并将选中的语句提交给父组件\n    public useState = {selectArr: [], setSelectArr: [],hoverStyle:[]};\n\n    //渲染方法\n    public render = (): ReactNode => {\n\n        // const {parentPropsValue, onclickItem} = props || {};\n        var parentPropsValue = this.props.args[\"sentences\"]\n\n        // const [selectArr, setSelectArr] = useState<any>([]);\n        // const [hoverStyle, setHoverStyle] = useState({}); //hover样式\n\n\n        return (\n            <div className=\"tag\">\n      <span\n          className=\"sentence\"\n          style={{\n              lineHeight: '30px',\n              height: '30px',\n              marginLeft: '5px',\n              border: '1px #cdcdcd solid',\n              padding: '2px',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              transitionProperty: 'all',\n          }}\n      >\n        {parentPropsValue?.map((item: any, index: number) => {\n            return (\n                <span\n                    key={index}\n                    onClick={() => this.handleClickThisEle(item)}\n                    onMouseEnter={() => this.state.toggleHover('enter')}\n                    onMouseLeave={() => this.state.toggleHover('leave')}\n                    className={selectArr.includes(item) ? 'selected' : ''}\n                    style={\n                        selectArr.includes(item)\n                            ? {...this.state.hoverStyle, background: 'lightgreen', cursor: 'pointer'}\n                            : {...this.state.hoverStyle, cursor: 'pointer'}\n                    }\n                >\n              {item}\n            </span>\n            );\n        })}\n      </span>\n            </div>\n        );\n    }\n    private handleClickThisEle = (item: any): void => {\n        let newSelectArr = [];\n        if (this.state.selectArr.includes(item)) {\n            //原来已经包含需要剔除\n            newSelectArr = this.state.selectArr.filter((oldItem: any) => oldItem !== item);\n        } else {\n            //原来不包含需要加入\n            newSelectArr = [...this.state.selectArr, item];\n        }\n        this.state.setSelectArr(newSelectArr);\n        console.log('你选择的语句有 => ', [...newSelectArr]);\n\n        // 抛出去给后端\n        // this.state.onclickItem([...newSelectArr]);\n        var a = newSelectArr.join()\n        this.setState(\n            () => Streamlit.setComponentValue(a)\n        )\n    }\n    // hover事件-hover样式\n    private toggleHover(type: any) {\n        const nowStyle =\n            type === 'enter'\n                ? {\n                    background: 'lightblue',\n                    padding: '3px',\n                }\n                : {};\n        this.state.setHoverStyle(nowStyle);\n    }\n}\n\nexport default withStreamlitConnection(SentencesClickLabel)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}